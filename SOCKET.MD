## ğŸ” 1. WebSocket nima?

WebSocket bu â€” **real-time (jonli) aloqa** o'rnatish imkonini beradigan texnologiya. Bu orqali mijoz (browser) va server o'zaro **doimiy aloqa** o'rnatadi.  

### Oddiy HTTP bilan farqi:
- HTTP: mijoz har safar serverga yangi so'rov yuboradi.
- WebSocket: aloqa bir marta o'rnatiladi va ikki tomonlama real vaqt uzluksiz bog'lanadi.

ğŸ“Œ Masalan: Chat dasturlari, jonli notifikatsiyalar, oâ€˜yinlar.

---

## ğŸ”— 2. Socket.IO nima?

**Socket.IO** â€” bu WebSocket asosida qurilgan **kutubxona** boâ€˜lib, u WebSocketâ€™ni yaratish va boshqarishni **osonlashtiradi**.

### Afzalliklari:
- Avtomatik fallback: WebSocket ishlamasa, boshqa texnikani (long polling) ishlatadi.
- Eventlar bilan ishlaydi (`on`, `emit`).
- JSON formatda maâ€™lumot yuborish/javob olish oson.

ğŸ“¦ Frontend (JavaScript) va backend (Node.js) uchun kutubxonalari bor.

---

## ğŸ¤ 3. Handshake nima?

"Handshake" â€” bu **birinchi bogâ€˜lanish bosqichi**, ya'ni mijoz va server oâ€˜zaro **aloqani tasdiqlaydi**.

### Jarayon:
1. Mijoz serverga ulanmoqchi boâ€˜ladi.
2. Server mijozni qabul qiladi va tasdiqlaydi.
3. Aloqa oâ€˜rnatiladi va endi real-time maâ€™lumot almashish boshlanadi.

---

## ğŸ“ 4. Fayl yuklash (File Upload)

Fayl yuklash bu â€” foydalanuvchi tomonidan serverga fayl yuborish jarayoni. Bu koâ€˜p hollarda formalar yoki drag-and-drop orqali amalga oshiriladi.

### Socket.IO orqali fayl yuklash:
Socket.IO yordamida **real-time fayl yuklash** ham mumkin, lekin odatda **HTTP POST** orqali fayl yuklanadi.

---

## ğŸ› ï¸ 5. Amaliy Misol (Practice)

### 1. Socket.IO asosida oddiy chat dasturi:
```js
// server.js (Node.js)
const express = require('express');
const http = require('http');
const { Server } = require('socket.io');

const app = express();
const server = http.createServer(app);
const io = new Server(server);

io.on('connection', (socket) => {
  console.log('Foydalanuvchi ulandi');

  socket.on('chat message', (msg) => {
    io.emit('chat message', msg);
  });

  socket.on('disconnect', () => {
    console.log('Foydalanuvchi chiqdi');
  });
});

server.listen(3000, () => {
  console.log('Server 3000-portda ishga tushdi');
});
```

```html
<!-- index.html -->
<input id="msgInput" />
<button onclick="sendMsg()">Yuborish</button>
<ul id="messages"></ul>

<script src="/socket.io/socket.io.js"></script>
<script>
  const socket = io();

  socket.on('chat message', function(msg) {
    const li = document.createElement('li');
    li.textContent = msg;
    document.getElementById('messages').appendChild(li);
  });

  function sendMsg() {
    const msg = document.getElementById('msgInput').value;
    socket.emit('chat message', msg);
  }
</script>
```

## Fayl yuklash

HTTP POST orqali fayl yuklashda `multer` paketidan foydalanamiz â€” bu Express uchun fayl yuklashni osonlashtiruvchi middleware.

## ğŸ“¦ 1. Kerakli paketlarni oâ€˜rnatamiz

```bash
npm init -y
npm install express multer
```

---

## ğŸ–¥ 2. `server.js` â€” Backend (Node.js + Express + Multer)

```js
const express = require("express");
const multer = require("multer");
const path = require("path");

const app = express();
const PORT = 3000;

// Fayllarni saqlash joyi va nomlash
const storage = multer.diskStorage({
  destination: (req, file, cb) => {
    cb(null, "uploads/"); // uploads papkasi ichiga saqlanadi
  },
  filename: (req, file, cb) => {
    cb(null, Date.now() + "-" + file.originalname); // noyob fayl nomi
  },
});

const upload = multer({ storage: storage });

app.use(express.static("public")); // frontend fayllari shu yerda boâ€˜ladi

// Fayl yuklash marshrut
app.post("/upload", upload.single("myfile"), (req, res) => {
  res.send("Fayl muvaffaqiyatli yuklandi: " + req.file.originalname);
});

app.listen(PORT, () => {
  console.log(`Server ishga tushdi: http://localhost:${PORT}`);
});
```

---

## ğŸŒ 3. `public/index.html` â€” Frontend (HTML forma)

```html
<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <title>Fayl yuklash (HTTP POST)</title>
</head>
<body>
  <h2>Fayl yuklash formasi</h2>
  <form action="/upload" method="post" enctype="multipart/form-data">
    <input type="file" name="myfile" required />
    <button type="submit">Yuklash</button>
  </form>
</body>
</html>
```

---

## ğŸ“ 4. `uploads/` papkasini yarating:

```bash
mkdir uploads
```

Bu yerga yuklangan fayllar tushadi.

---

## âœ… Ishlash tartibi:
1. Terminalda `node server.js` ni ishga tushiring.
2. Brauzerda `http://localhost:3000` ni oching.
3. Fayl tanlang va **"Yuklash"** tugmasini bosing.
4. Fayl `uploads/` papkasiga saqlanadi.
